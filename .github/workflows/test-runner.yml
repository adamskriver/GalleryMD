name: Test Self-Hosted Runner

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  workflow_dispatch:  # Allows manual trigger from GitHub UI

jobs:
  test:
    runs-on: self-hosted
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Show runner info
        run: |
          echo "Runner hostname: $(hostname)"
          echo "Current directory: $(pwd)"
          echo "Shell: $SHELL"
          echo "User: $(whoami)"
      
      - name: List repository files
        run: |
          ls -lah
          echo "---"
          find . -maxdepth 2 -type f | head -20
      
      - name: Test Docker availability
        run: |
          docker --version
          docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"
      
      - name: Success message
        run: |
          echo "âœ“ Self-hosted runner is working correctly!"
